<!DOCTYPE html>
<html>
    <head>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous" />
        
<!-- <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> -->

    <style>
        canvas{
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
        }
        .chart-container {
            width: 500px;
            margin-left: 40px;
            margin-right: 40px;
            margin-bottom: 40px;
        }
	</style>

    </head>
    <body class="bg-light">
<!--        <button type="button" onclick="alert(big_data);">Click test</button>-->
        <nav class="navbar navbar-dark bg-dark" >
            <a class="navbar-brand" href="#"><i class="text-white fas fa-chart-pie"> </i>&nbsp;ELLORA</a>
            <i class="text-white fas fa-info-circle"></i>
        </nav>
        <div class="container-fluid">
            <div class="row pr-3 pt-3">
                <div class="col-3">
                    <div class="list-group list-group-flush text-truncate shadow" id="list-tab" role="tablist" style="font-weight:100">
                    <a class="list-group-item list-group-item-action active" id="list-home-list" data-toggle="list" href="#list-home" role="tab" aria-controls="home">Static Example</a>
                    <a class="list-group-item list-group-item-action" id="list-profile-list" data-toggle="list" href="#list-profile" role="tab" aria-controls="profile">Dynamic Example</a>
<!--                    <a class="list-group-item list-group-item-action" id="list-messages-list" data-toggle="list" href="#list-messages" role="tab" aria-controls="messages">STYLES</a>-->
                    <a class="list-group-item list-group-item-action" id="list-settings-list" data-toggle="list" href="#list-settings" role="tab" aria-controls="settings">Chart Samples</a>
                    </div>
                </div>
                <div class="col-9">
                    <div class="tab-content" id="nav-tabContent">
                        <div class="tab-pane fade show active" id="list-home" role="tabpanel" aria-labelledby="list-home-list">
                            <div class="row">
                                <div class="col-12 bg-white shadow pt-3">
                                    <div class="row"><span class="p-2 text-primary" style="font-size:1.25rem;">TABLE A</span></div>
                                    <div class="row p-2" id="table-a-container" style="max-height:400px; overflow-y:auto">
<!--                                        <table id="table-a"></table>-->
                                    </div>
                                    <div class="row">&nbsp;</div>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col">
                                    <div class="bg-white shadow">
                                        <canvas id="graph_1"></canvas>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="bg-white shadow">
                                        <canvas id="graph_2"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="list-profile" role="tabpanel" aria-labelledby="list-profile-list">
                            .2.
                        </div>
<!--                    <div class="tab-pane fade" id="list-messages" role="tabpanel" aria-labelledby="list-messages-list">.3.</div>-->
                        <div class="tab-pane fade" id="list-settings" role="tabpanel" aria-labelledby="list-settings-list">
                            <div class="row">
                                <div class="col">
                                    <div class="bg-white shadow col">
                                    <div class="row">
                                        <canvas id="chart4"></canvas>
                                    </div>
                                    <div class="row m-2 p-3">
                                        Chart Type:
                                        <select class="m-2" id="type">
                                            <option value="line">Line</option>
                                            <option value="bar">Bar</option>
                                        </select>
                                        <button class="btn btn-xs btn-primary" type="button" id="update">update</button>
                                    </div>
                                    </div>

                                </div>
                                <div class="w-100"></div>
                                <div class="col mt-2">
                                    <div class="bg-white shadow">
                                        <canvas id="eg_chart_1"></canvas>
                                    </div>
                                </div>
                                <div class="col mt-2">
                                    <div class="bg-white shadow">
                                          <canvas id="eg_chart_2"></canvas>
                                    </div>
                                </div>
                                <div class="w-100"></div>
                                <div class="col mt-2">
                                    <div class="bg-white shadow">
                                        <div class="pointStyleContainer"></div>
                                    </div>
                                </div>
                                <div class="col mt-2">
                                    <div class="bg-light text-primary shadow text-center h-100">
                                        <br /><br /><br /><a class="border border-primary p-2" href="Chart/samples/index.html" >MORE...</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="fixed-bottom bg-transparent text-black-50 clearfix m-2"><small style="font-weight: 100;" class="float-right">&copy; DUALROOTS SOFTWARE PVT. LTD.</small></div>
 
<!--        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->

        <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
        <script src="Chart/Chart.js"></script>

        <!-- Error: Chart.js - Moment.js could not be found! You must include it before Chart.js to use the time scale.  -->
        <script src="js/utils.js"></script>
        <script src="https://underscorejs.org/underscore-min.js"></script>
        
               <!-- SCRIPTS -->
        <script>
                        /* 
            
            JSON DATA BEGIN
            
            
            */

            var big_data = [
	{
		"MOC_Number": "MOC-001",
		"MOC_Type": "TPC",
		"Type_of_Change": "CL",
		"Is_Emergency": "0",
		"Creation_Year": "2011",
		"Creation_Month": "1",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Gate1"
	},
	{
		"MOC_Number": "MOC-002",
		"MOC_Type": "PC",
		"Type_of_Change": "PCS",
		"Is_Emergency": "0",
		"Creation_Year": "2012",
		"Creation_Month": "1",
		"MOC_Status": "Closed",
		"MOC_Current_Step": "END WF"
	},
	{
		"MOC_Number": "MOC-003",
		"MOC_Type": "TPC",
		"Type_of_Change": "Normal",
		"Is_Emergency": "0",
		"Creation_Year": "2010",
		"Creation_Month": "1",
		"MOC_Status": "Cancelled",
		"MOC_Current_Step": "END WF"
	},
	{
		"MOC_Number": "MOC-004",
		"MOC_Type": "PC",
		"Type_of_Change": "Normal and PCS",
		"Is_Emergency": "0",
		"Creation_Year": "2010",
		"Creation_Month": "1",
		"MOC_Status": "On Hold",
		"MOC_Current_Step": "MOC Gate1"
	},
	{
		"MOC_Number": "MOC-005",
		"MOC_Type": "TPC",
		"Type_of_Change": "CL",
		"Is_Emergency": "1",
		"Creation_Year": "2010",
		"Creation_Month": "2",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Execution"
	},
	{
		"MOC_Number": "MOC-006",
		"MOC_Type": "PC",
		"Type_of_Change": "PCS",
		"Is_Emergency": "1",
		"Creation_Year": "2010",
		"Creation_Month": "2",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Gate2"
	},
	{
		"MOC_Number": "MOC-007",
		"MOC_Type": "TPC",
		"Type_of_Change": "Normal",
		"Is_Emergency": "1",
		"Creation_Year": "2010",
		"Creation_Month": "2",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Risk Assessment"
	},
	{
		"MOC_Number": "MOC-008",
		"MOC_Type": "PC",
		"Type_of_Change": "Normal and PCS",
		"Is_Emergency": "1",
		"Creation_Year": "2010",
		"Creation_Month": "2",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Registration"
	},
	{
		"MOC_Number": "MOC-009",
		"MOC_Type": "TPC",
		"Type_of_Change": "CL",
		"Is_Emergency": "1",
		"Creation_Year": "2010",
		"Creation_Month": "3",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Execution"
	},
	{
		"MOC_Number": "MOC-010",
		"MOC_Type": "PC",
		"Type_of_Change": "PCS",
		"Is_Emergency": "1",
		"Creation_Year": "2010",
		"Creation_Month": "3",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Gate2"
	},
	{
		"MOC_Number": "MOC-011",
		"MOC_Type": "TPC",
		"Type_of_Change": "Normal",
		"Is_Emergency": "1",
		"Creation_Year": "2010",
		"Creation_Month": "3",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Risk Assessment"
	},
	{
		"MOC_Number": "MOC-012",
		"MOC_Type": "PC",
		"Type_of_Change": "Normal and PCS",
		"Is_Emergency": "1",
		"Creation_Year": "2010",
		"Creation_Month": "3",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Registration"
	},
	{
		"MOC_Number": "MOC-013",
		"MOC_Type": "TPC",
		"Type_of_Change": "CL",
		"Is_Emergency": "0",
		"Creation_Year": "2011",
		"Creation_Month": "1",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Gate1"
	},
	{
		"MOC_Number": "MOC-014",
		"MOC_Type": "PC",
		"Type_of_Change": "PCS",
		"Is_Emergency": "0",
		"Creation_Year": "2011",
		"Creation_Month": "1",
		"MOC_Status": "Closed",
		"MOC_Current_Step": "END WF"
	},
	{
		"MOC_Number": "MOC-015",
		"MOC_Type": "TPC",
		"Type_of_Change": "Normal",
		"Is_Emergency": "0",
		"Creation_Year": "2011",
		"Creation_Month": "1",
		"MOC_Status": "Cancelled",
		"MOC_Current_Step": "END WF"
	},
	{
		"MOC_Number": "MOC-016",
		"MOC_Type": "PC",
		"Type_of_Change": "Normal and PCS",
		"Is_Emergency": "0",
		"Creation_Year": "2011",
		"Creation_Month": "1",
		"MOC_Status": "On Hold",
		"MOC_Current_Step": "MOC Gate1"
	},
	{
		"MOC_Number": "MOC-017",
		"MOC_Type": "TPC",
		"Type_of_Change": "CL",
		"Is_Emergency": "1",
		"Creation_Year": "2011",
		"Creation_Month": "2",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Execution"
	},
	{
		"MOC_Number": "MOC-018",
		"MOC_Type": "PC",
		"Type_of_Change": "PCS",
		"Is_Emergency": "1",
		"Creation_Year": "2011",
		"Creation_Month": "2",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Gate2"
	},
	{
		"MOC_Number": "MOC-019",
		"MOC_Type": "TPC",
		"Type_of_Change": "Normal",
		"Is_Emergency": "1",
		"Creation_Year": "2011",
		"Creation_Month": "2",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Risk Assessment"
	},
	{
		"MOC_Number": "MOC-020",
		"MOC_Type": "PC",
		"Type_of_Change": "Normal and PCS",
		"Is_Emergency": "1",
		"Creation_Year": "2011",
		"Creation_Month": "2",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Registration"
	},
	{
		"MOC_Number": "MOC-021",
		"MOC_Type": "TPC",
		"Type_of_Change": "CL",
		"Is_Emergency": "1",
		"Creation_Year": "2011",
		"Creation_Month": "3",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Execution"
	},
	{
		"MOC_Number": "MOC-022",
		"MOC_Type": "PC",
		"Type_of_Change": "PCS",
		"Is_Emergency": "1",
		"Creation_Year": "2011",
		"Creation_Month": "3",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Gate2"
	},
	{
		"MOC_Number": "MOC-023",
		"MOC_Type": "TPC",
		"Type_of_Change": "Normal",
		"Is_Emergency": "1",
		"Creation_Year": "2011",
		"Creation_Month": "3",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Risk Assessment"
	},
	{
		"MOC_Number": "MOC-024",
		"MOC_Type": "PC",
		"Type_of_Change": "Normal and PCS",
		"Is_Emergency": "1",
		"Creation_Year": "2011",
		"Creation_Month": "3",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Registration"
	},
	{
		"MOC_Number": "MOC-025",
		"MOC_Type": "TPC",
		"Type_of_Change": "CL",
		"Is_Emergency": "0",
		"Creation_Year": "2012",
		"Creation_Month": "1",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Gate1"
	},
	{
		"MOC_Number": "MOC-026",
		"MOC_Type": "PC",
		"Type_of_Change": "PCS",
		"Is_Emergency": "0",
		"Creation_Year": "2012",
		"Creation_Month": "1",
		"MOC_Status": "Closed",
		"MOC_Current_Step": "END WF"
	},
	{
		"MOC_Number": "MOC-027",
		"MOC_Type": "TPC",
		"Type_of_Change": "Normal",
		"Is_Emergency": "0",
		"Creation_Year": "2012",
		"Creation_Month": "1",
		"MOC_Status": "Cancelled",
		"MOC_Current_Step": "END WF"
	},
	{
		"MOC_Number": "MOC-028",
		"MOC_Type": "PC",
		"Type_of_Change": "Normal and PCS",
		"Is_Emergency": "0",
		"Creation_Year": "2012",
		"Creation_Month": "1",
		"MOC_Status": "On Hold",
		"MOC_Current_Step": "MOC Gate1"
	},
	{
		"MOC_Number": "MOC-029",
		"MOC_Type": "TPC",
		"Type_of_Change": "CL",
		"Is_Emergency": "1",
		"Creation_Year": "2012",
		"Creation_Month": "2",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Execution"
	},
	{
		"MOC_Number": "MOC-030",
		"MOC_Type": "PC",
		"Type_of_Change": "PCS",
		"Is_Emergency": "1",
		"Creation_Year": "2012",
		"Creation_Month": "2",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Gate2"
	},
	{
		"MOC_Number": "MOC-031",
		"MOC_Type": "TPC",
		"Type_of_Change": "Normal",
		"Is_Emergency": "1",
		"Creation_Year": "2012",
		"Creation_Month": "2",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Risk Assessment"
	},
	{
		"MOC_Number": "MOC-032",
		"MOC_Type": "PC",
		"Type_of_Change": "Normal and PCS",
		"Is_Emergency": "1",
		"Creation_Year": "2012",
		"Creation_Month": "2",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Registration"
	},
	{
		"MOC_Number": "MOC-033",
		"MOC_Type": "TPC",
		"Type_of_Change": "CL",
		"Is_Emergency": "1",
		"Creation_Year": "2012",
		"Creation_Month": "3",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Execution"
	},
	{
		"MOC_Number": "MOC-034",
		"MOC_Type": "PC",
		"Type_of_Change": "PCS",
		"Is_Emergency": "1",
		"Creation_Year": "2012",
		"Creation_Month": "3",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Gate2"
	},
	{
		"MOC_Number": "MOC-035",
		"MOC_Type": "TPC",
		"Type_of_Change": "Normal",
		"Is_Emergency": "1",
		"Creation_Year": "2012",
		"Creation_Month": "3",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Risk Assessment"
	},
	{
		"MOC_Number": "MOC-036",
		"MOC_Type": "PC",
		"Type_of_Change": "Normal and PCS",
		"Is_Emergency": "1",
		"Creation_Year": "2012",
		"Creation_Month": "3",
		"MOC_Status": "Open",
		"MOC_Current_Step": "MOC Registration"
	}
];
            
            /* 
            
            JSON DATA END
            
            
            */
            var prime_keys = ['user_id','username','room_id','conference_id','schedule_id','Tables_in_meetingkaro'];

            var gph1_config = {
                type: 'doughnut',
                data: getGraph1Data(),
                options: {
                    responsive: true,
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: 'MOC Status'
                    },
                    animation: {
                        animateScale: true,
                        animateRotate: true
                    }
                }
            };

            var gph2_config = {
			type: 'line',
			data: getGraph2Data(),
			options: {
                    responsive: true,
                    title: {
                        display: true,
                        text: 'MOC by Year'
                    },
                    tooltips: {
                        mode: 'index',
                        intersect: false,
                    },
                    hover: {
                        mode: 'nearest',
                        intersect: true
                    },
                    scales: {
                        xAxes: [{
                            display: true,
                            scaleLabel: {
                                display: true,
                                labelString: 'Year'
                            }
                        }],
                        yAxes: [{
                            display: true,
                            scaleLabel: {
                                display: true,
                                labelString: 'Value'
                            }
                        }]
                    }
                }
            };

            function setTableA(){
                generateTable('table-a-container',big_data);
            }
            function setTableB(){
                generateTable('table-b',big_data);                
            }
            function update(){
                updateGraph1();
                updateGraph2();
                updateGraph3();
                var groupedData = _.groupBy(big_data, function(d){return d.MOC_Type});
            }
            function getGraph1Data(){
                var data = {datasets:[{data:[],backgroundColor:[],label:'Set 1'}],labels:[]};
                var groupedData = _.groupBy(big_data, function(d){return d.MOC_Status});
                
                $.each(groupedData,function(key,arr){
                    var colorNames = Object.keys(window.chartColors);
                    var colorName = colorNames[data.datasets[0].data.length % colorNames.length];
                    var newColor = window.chartColors[colorName];

                    data.labels.push(key);
                    data.datasets[0].data.push(arr.length);
                    data.datasets[0].backgroundColor.push(newColor);

                    //data.datasets[0].backgroundColor.push(arr.length);
                });
                return data;
            }
            function getGraph2Data(){
                var data = {datasets:[],labels:[]};
                var groupedData = _.groupBy(big_data, function(d){return d.Creation_Year});
                var subGroupedData_all = _.groupBy(big_data, function(d){return d.MOC_Type});
                //var datasets = [];
                console.log(groupedData);
                
                $.each(groupedData,function(key,arr){
                    data.labels.push(key);
                    
                    
                    //data.datasets[0].backgroundColor.push(arr.length);
                });
                $.each(subGroupedData_all,function(skey,sarr){
                    var colorNames = Object.keys(window.chartColors);
                    var colorName = colorNames[data.datasets.length % colorNames.length];
                    var newColor = window.chartColors[colorName];
                    
                    var dataset = {label:skey,data:[],backgroundColor: newColor,
					borderColor: newColor,fill:false};
                        console.log(skey);
                    
                    $.each(groupedData,function(grkey,grarr){
                        var subGroupedData_inside = _.groupBy(grarr, function(d){return d.MOC_Type});
                        //console.log(subGroupedData_inside[skey].length);
                        dataset.data.push(subGroupedData_inside[skey].length);
                        //console.log(skey);
                        //dataset.data.push(inkey.skey.length);
                    });
                    console.log(dataset);
                    data.datasets.push(dataset);

                    //var subgroup_data_count = _.groupBy(arr, function(d){return d.MOC_Type}).length;
                    //console.log(_.groupBy(arr, function(d){return d.MOC_Type}));
//                        dataset.data.push[];
                    //data.datasets[0].data.push(arr.length);
                });
                console.log(JSON.stringify(data));
                return data;
            }
            function updateGraph1(){

            }
            function updateGraph2(){
                
            }
            function updateGraph3(){
                
            }

            function generateTable(table_container_id, jsonData){
                
                var table = $("<table />");
                var headerCount = 1;
                $(jsonData).each(function(i,val){
                        var headerRow = $('<tr class=\'bg-light\' />');
                        var row = $('<tr />');
                        $.each(val,function(k,v){
                                if(["GUISUCCESS","GUIERROR","GUIWARNING","GUIINFO"].indexOf(k)<0){
                                        if(headerCount)$('<th />').html(k.split("_").join(" ")).appendTo(headerRow);
                                        if(k.split('_').pop()=='DateTime'){
                                                $('<td />').addClass(k).html(gDTobj(v)).appendTo(row);
                                        }else{
                                                $('<td />').addClass((prime_keys.indexOf(k)>=0)?k:null).html(v).attr('onclick',(prime_keys.indexOf(k)>=0)?'hit(this)':null).appendTo(row);
                                        }
                                }else{
                                        parseInt(v,10)?$(row).attr('class',k.slice(3).toLowerCase()):nothing();
                                }
                        });
                        if(headerCount){$(headerRow).appendTo(table);headerCount=0;}
                        $(row).appendTo(table);
                });
                
                $("#"+table_container_id).html(table);
                $("#"+table_container_id+" table").addClass("table table-sm table-bordered table-responsive");
                        //console.log(table);
                //return table;

                
            }
            
            var randomScalingFactor = function() {
                return Math.round(Math.random() * 100);
            };

            function createConfig(pointStyle) {
                return {
                    type: 'line',
                    data: {
                        labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],
                        datasets: [{
                            label: 'My First dataset',
                            backgroundColor: window.chartColors.red,
                            borderColor: window.chartColors.red,
                            data: [10, 23, 5, 99, 67, 43, 0],
                            fill: false,
                            pointRadius: 10,
                            pointHoverRadius: 15,
                            showLine: false // no line shown
                        }]
                    },
                    options: {
                        responsive: true,
                        title: {
                            display: true,
                            text: 'Point Style: ' + pointStyle
                        },
                        legend: {
                            display: false
                        },
                        elements: {
                            point: {
                                pointStyle: pointStyle
                            }
                        }
                    }
                };
            }
            
            window.onload = function() {
                var gph1 = document.getElementById('graph_1').getContext('2d');
                window.myGraph1 = new Chart(gph1, gph1_config);

                var gph2 = document.getElementById('graph_2').getContext('2d');
                window.myGraph2 = new Chart(gph2, gph2_config);

                var eg_config_1 = {
                    // The type of chart we want to create
                    type: 'line',

                    // The data for our dataset
                    data: {
                    labels: ["January", "February", "March", "April", "May", "June", "July"],
                    datasets: [{
                    label: "My First dataset",
                    backgroundColor: 'rgb(255, 99, 132)',
                    borderColor: 'rgb(255, 99, 132)',
                    data: [0, 10, 5, 2, 20, 30, 45],
                    }]
                    },

                    // Configuration options go here
                    options: {}
                }

                    //MY PIE EG2
                var eg_config_2 = {
                    type: 'pie',
                    data: {
                        datasets: [{
                            data: [
                                randomScalingFactor(),
                                randomScalingFactor(),
                                randomScalingFactor(),
                                randomScalingFactor(),
                                randomScalingFactor(),
                            ],
                            backgroundColor: [
                                window.chartColors.red,
                                window.chartColors.orange,
                                window.chartColors.yellow,
                                window.chartColors.green,
                                window.chartColors.blue,
                            ],
                            label: 'Dataset 1'
                        }],
                        labels: [
                            'Red',
                            'Orange',
                            'Yellow',
                            'Green',
                            'Blue'
                        ]
                    },
                    options: {
                        responsive: true
                    }
                };

                var ctx1 = document.getElementById('eg_chart_1').getContext('2d');
                var chart1 = new Chart(ctx1, eg_config_1);

                var ctx2 = document.getElementById('eg_chart_2').getContext('2d');
                window.myPie = new Chart(ctx2, eg_config_2);

                //END MYPIE 

                // POINT STYLES
                var pointStyleContainer = document.querySelector('.pointStyleContainer');
                [
                    'triangle'
                ].forEach(function(pointStyle) {
                    var div = document.createElement('div');
                    div.classList.add('col');

                    var canvas = document.createElement('canvas');
                    div.appendChild(canvas);
                    pointStyleContainer.appendChild(div);

                    var ctx = canvas.getContext('2d');
                    var config = createConfig(pointStyle);
                    new Chart(ctx, config);
                });

                //Financial Chart eg_chart_4

            function randomNumber(min, max) {
                return Math.random() * (max - min) + min;
            }

            function randomBar(date, lastClose) {
                var open = randomNumber(lastClose * 0.95, lastClose * 1.05);
                var close = randomNumber(open * 0.95, open * 1.05);
                return {
                    t: date.valueOf(),
                    y: close
                };
            }

            var dateFormat = 'MMMM DD YYYY';
            var date = moment('April 01 2017', dateFormat);
            var data = [randomBar(date, 30)];
            var labels = [date];
            while (data.length < 60) {
                date = date.clone().add(1, 'd');
                if (date.isoWeekday() <= 5) {
                    data.push(randomBar(date, data[data.length - 1].y));
                    labels.push(date);
                }
            }

            var ctx4 = document.getElementById('chart4').getContext('2d');
            ctx4.canvas.width = 1000;
            ctx4.canvas.height = 300;
            var cfg4 = {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Financial Chart',
                        data: data,
                        type: 'line',
                        pointRadius: 0,
                        fill: false,
                        lineTension: 0,
                        borderWidth: 2
                    }]
                },
                options: {
                    scales: {
                        xAxes: [{
                            type: 'time',
                            distribution: 'series',
                            ticks: {
                                source: 'labels'
                            }
                        }],
                        yAxes: [{
                            scaleLabel: {
                                display: true,
                                labelString: 'Closing price ($)'
                            }
                        }]
                    }
                }
            };
            var chart4 = new Chart(ctx4, cfg4);

            document.getElementById('update').addEventListener('click', function() {
                var type = document.getElementById('type').value;
                chart4.config.data.datasets[0].type = type;
                chart4.update();
            });
    //END FINANCIAL

                //REPORTING
                
                    setTableA();
                    setTableB();
                    update();
                
            } // WINDOW.ONLOAD
        
            
        </script>

</body>
</html>
